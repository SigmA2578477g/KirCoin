<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KirCoin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }
        
        .hamster-container {
            position: relative;
            transition: transform 0.1s;
        }
        
        .hamster-container:active {
            transform: scale(0.95);
        }
        
        .click-effect {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: rgba(255, 255, 0, 0.7);
            border-radius: 50%;
            pointer-events: none;
            animation: click-animation 0.6s forwards;
        }
        
        @keyframes click-animation {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }
        
        .dice-face {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            color: #1e3c72;
            font-weight: bold;
            margin: 0 auto;
        }
        
        .achievement-badge {
            animation: achievementPop 0.5s ease-out;
        }
        
        @keyframes achievementPop {
            0% { transform: scale(0); opacity: 0; }
            80% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .progress-bar {
            height: 10px;
            background-color: #2a5298;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #4ade80;
            transition: width 0.3s;
        }
        
        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
                grid-template-areas:
                    "header"
                    "hamster"
                    "dice"
                    "shop"
                    "leaderboard";
            }
            
            .hamster-area, .shop-area, .dice-area, .leaderboard-area {
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body class="p-4">
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–≤–æ–¥–∞ –Ω–∏–∫–∞ -->
    <div id="nicknameModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-gradient-to-br from-blue-800 to-blue-900 p-6 rounded-lg shadow-xl max-w-md w-full">
            <h2 class="text-2xl font-bold text-center mb-4">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ KirCoin!</h2>
            <p class="text-center mb-4">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É:</p>
            <input id="nicknameInput" type="text" class="w-full p-3 rounded-lg bg-blue-700 text-white border border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400 mb-4" placeholder="–í–∞—à –Ω–∏–∫–Ω–µ–π–º">
            <button id="startGameBtn" class="w-full bg-yellow-500 hover:bg-yellow-600 text-blue-900 font-bold py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
            </button>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä—ã -->
    <div class="max-w-7xl mx-auto">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center">
                <img src="https://media.istockphoto.com/id/1068306906/vector/hamster.jpg?b=1&s=170x170&k=20&c=MvDCuOC7hP950iqfafdgrhyCibm8rjUzUaVc4a-LYjE=" alt="–õ–æ–≥–æ—Ç–∏–ø KirCoin" class="h-16 w-16 mr-4">
                <h1 class="text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-yellow-600">KirCoin</h1>
            </div>
            <div class="flex justify-between items-center mt-2">
                <div id="balanceContainer" class="text-xl font-bold bg-blue-800 bg-opacity-50 px-4 py-2 rounded-lg hidden">
                    –ë–∞–ª–∞–Ω—Å: <span id="balance">0</span> KC
                </div>
                <div id="autoClickerStatus" class="text-sm bg-blue-800 bg-opacity-50 px-3 py-1 rounded-lg hidden">–ê–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä: <span id="autoClickerPower">0</span> KC/—Å–µ–∫</div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 main-grid" style="grid-template-areas: 'hamster shop leaderboard' 'dice shop leaderboard';">
            <!-- –ë–ª–æ–∫ —Ö–æ–º—è–∫–∞ -->
            <div class="hamster-area bg-blue-900 bg-opacity-30 p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-bold mb-4 text-center">–ö–ª–∏–∫–∞–π –Ω–∞ —Ö–æ–º—è–∫–∞!</h2>
                <div id="hamster" class="hamster-container mx-auto w-48 h-48 cursor-pointer relative">
                    <img src="https://media.istockphoto.com/id/1068306906/vector/hamster.jpg?b=1&s=170x170&k=20&c=MvDCuOC7hP950iqfafdgrhyCibm8rjUzUaVc4a-LYjE=" alt="–•–æ–º—è–∫" class="w-full h-full object-contain hover:-translate-y-1 transition-transform duration-200">
                </div>
                <div class="mt-4 text-center">
                    <p class="text-sm text-blue-300">–ö–ª–∏–∫–æ–≤ –∑–∞ —Å–µ—Å—Å–∏—é: <span id="sessionClicks">0</span></p>
                    <p class="text-sm text-blue-300">–ö–ª–∏–∫–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É: <span id="clicksPerSecond">0</span></p>
                </div>
            </div>

            <!-- –ë–ª–æ–∫ –∏–≥—Ä—ã –≤ –∫—É–±–∏–∫ -->
            <div class="dice-area bg-blue-900 bg-opacity-30 p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-bold mb-4 text-center">–°–ª—É—á–∞–π–Ω—ã–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫</h2>
                <p class="text-center mb-4">–û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫: <span id="diceAttempts">3</span></p>
                <div id="diceResultContainer" class="mb-4">
                    <div id="diceResult" class="dice-face">?</div>
                </div>
                <button id="rollDiceBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                    –ö–∏–Ω—É—Ç—å –∫—É–±–∏–∫ (20-40 KC)
                </button>
            </div>

            <!-- –ë–ª–æ–∫ –º–∞–≥–∞–∑–∏–Ω–∞ -->
            <div class="shop-area bg-blue-900 bg-opacity-30 p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-bold mb-4 text-center">–ú–∞–≥–∞–∑–∏–Ω —É–ª—É—á—à–µ–Ω–∏–π</h2>
                <div class="space-y-4">
                    <!-- –£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∏–∫–∞ -->
                    <div class="p-4 bg-blue-800 bg-opacity-70 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-bold">–£–ª—É—á—à–∏—Ç—å –∫–ª–∏–∫</h3>
                            <span class="bg-yellow-500 text-blue-900 px-2 py-1 rounded text-sm">+1 KC –∑–∞ –∫–ª–∏–∫</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <p class="text-sm text-blue-200">–£—Ä–æ–≤–µ–Ω—å: <span id="clickPowerLevel">1</span></p>
                            <p class="text-sm text-blue-200">–¶–µ–Ω–∞: <span id="clickPowerPrice">10</span> KC</p>
                        </div>
                        <button id="buyClickPowerBtn" class="w-full mt-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                            –ö—É–ø–∏—Ç—å
                        </button>
                    </div>

                    <!-- –ê–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä -->
                    <div class="p-4 bg-blue-800 bg-opacity-70 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-bold">–ê–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä</h3>
                            <span class="bg-yellow-500 text-blue-900 px-2 py-1 rounded text-sm">+1 KC/—Å–µ–∫</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <p class="text-sm text-blue-200">–£—Ä–æ–≤–µ–Ω—å: <span id="autoClickerLevel">0</span></p>
                            <p class="text-sm text-blue-200">–¶–µ–Ω–∞: <span id="autoClickerPrice">50</span> KC</p>
                        </div>
                        <button id="buyAutoClickerBtn" class="w-full mt-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                            –ö—É–ø–∏—Ç—å
                        </button>
                    </div>

                    <!-- –£–ª—É—á—à–µ–Ω–∏–µ —É–¥–∞—á–∏ -->
                    <div class="p-4 bg-blue-800 bg-opacity-70 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-bold">–£–ª—É—á—à–∏—Ç—å —É–¥–∞—á—É</h3>
                            <span class="bg-yellow-500 text-blue-900 px-2 py-1 rounded text-sm">+5 –∫ –≤—ã–∏–≥—Ä—ã—à—É</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <p class="text-sm text-blue-200">–£—Ä–æ–≤–µ–Ω—å: <span id="luckLevel">1</span></p>
                            <p class="text-sm text-blue-200">–¶–µ–Ω–∞: <span id="luckPrice">30</span> KC</p>
                        </div>
                        <button id="buyLuckBtn" class="w-full mt-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                            –ö—É–ø–∏—Ç—å
                        </button>
                    </div>

                    <!-- –£–ª—É—á—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∞–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä–∞ -->
                    <div class="p-4 bg-blue-800 bg-opacity-70 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-bold">–°–∫–æ—Ä–æ—Å—Ç—å –∞–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä–∞</h3>
                            <span class="bg-yellow-500 text-blue-900 px-2 py-1 rounded text-sm">x2 —Å–∫–æ—Ä–æ—Å—Ç—å</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <p class="text-sm text-blue-200">–£—Ä–æ–≤–µ–Ω—å: <span id="clickerSpeedLevel">1</span></p>
                            <p class="text-sm text-blue-200">–¶–µ–Ω–∞: <span id="clickerSpeedPrice">100</span> KC</p>
                        </div>
                        <button id="buyClickerSpeedBtn" class="w-full mt-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                            –ö—É–ø–∏—Ç—å
                        </button>
                    </div>

                    <!-- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤ –∫—É–±–∏–∫–µ -->
                    <div class="p-4 bg-blue-800 bg-opacity-70 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-bold">–î–æ–ø. –ø–æ–ø—ã—Ç–∫–∏</h3>
                            <span class="bg-yellow-500 text-blue-900 px-2 py-1 rounded text-sm">+1 –ø–æ–ø—ã—Ç–∫–∞</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <p class="text-sm text-blue-200">–ö—É–ø–ª–µ–Ω–æ: <span id="extraAttemptsCount">0</span></p>
                            <p class="text-sm text-blue-200">–¶–µ–Ω–∞: <span id="extraAttemptsPrice">75</span> KC</p>
                        </div>
                        <button id="buyExtraAttemptsBtn" class="w-full mt-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                            –ö—É–ø–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>

            <!-- –ë–ª–æ–∫ —Ç–æ–ø–∞ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
            <div class="leaderboard-area bg-blue-900 bg-opacity-30 p-6 rounded-xl shadow-lg">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold">–¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</h2>
                    <div id="playerRankBadge" class="bg-yellow-500 text-blue-900 px-3 py-1 rounded-full text-sm font-bold hidden">–í—ã: <span id="playerRank">-</span></div>
                </div>
                
                <div id="leaderboard" class="mb-8">
                    <div class="text-center py-4">
                        <p class="text-blue-300">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø–∞...</p>
                    </div>
                </div>

                <h3 class="text-xl font-bold mb-3">–í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                <div id="achievementsContainer" class="grid grid-cols-2 gap-2">
                    <div class="achievement-badge bg-blue-800 bg-opacity-70 p-2 rounded-lg flex items-center">
                        <div class="w-10 h-10 bg-blue-700 rounded-full flex items-center justify-center mr-2">
                            <span>üèÜ</span>
                        </div>
                        <div>
                            <p class="text-sm font-bold">–ù–æ–≤–∏—á–æ–∫</p>
                            <p class="text-xs text-blue-300">–°–¥–µ–ª–∞—Ç—å 10 –∫–ª–∏–∫–æ–≤</p>
                            <div class="progress-bar mt-1">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –§—É—Ç–µ—Ä -->
        <div class="mt-12 text-center text-blue-300 text-sm">
            <p>–°–¥–µ–ª–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é –ö–∏—Ä–∏–ª–ª –î–µ–º–µ–Ω—Ç—å–µ–≤</p>
        </div>
    </div>

    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <audio id="clickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3"></audio>
    <audio id="buySound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3"></audio>
    <audio id="diceSound" src="https://assets.mixkit.co/sfx/preview/mixkit-rolling-dice-2000.mp3"></audio>
    <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-bonus-earned-2065.mp3"></audio>

    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let balance = 0;
        let clickPower = 1;
        let autoClickerPower = 0;
        let autoClickerInterval;
        let sessionClicks = 0;
        let clicksHistory = [];
        let clicksPerSecond = 0;
        let diceAttempts = 3;
        let extraAttempts = 0;
        let luckBonus = 0;
        let totalEarned = 0;
        let playerNickname = '';
        let achievements = {
            firstClick: false,
            first100: false,
            first1000: false,
            clickMaster: false,
            diceMaster: false,
            autoClicker: false,
            shopaholic: false,
            legend: false
        };

        // –¶–µ–Ω—ã —É–ª—É—á—à–µ–Ω–∏–π
        const shopItems = {
            clickPower: { level: 1, price: 10, increase: 1 },
            autoClicker: { level: 0, price: 50, increase: 1 },
            luck: { level: 1, price: 30, increase: 5 },
            clickerSpeed: { level: 1, price: 100, speedMultiplier: 2 },
            extraAttempts: { count: 0, price: 75 }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        document.addEventListener('DOMContentLoaded', () => {
            loadGame();
            updateUI();
            checkAchievements();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            document.getElementById('startGameBtn').addEventListener('click', startGame);
            document.getElementById('hamster').addEventListener('click', handleHamsterClick);
            document.getElementById('rollDiceBtn').addEventListener('click', rollDice);
            document.getElementById('buyClickPowerBtn').addEventListener('click', () => buyUpgrade('clickPower'));
            document.getElementById('buyAutoClickerBtn').addEventListener('click', () => buyUpgrade('autoClicker'));
            document.getElementById('buyLuckBtn').addEventListener('click', () => buyUpgrade('luck'));
            document.getElementById('buyClickerSpeedBtn').addEventListener('click', () => buyUpgrade('clickerSpeed'));
            document.getElementById('buyExtraAttemptsBtn').addEventListener('click', buyExtraAttempts);
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            loadLeaderboard();
            updateCPS();
            setInterval(updateCPS, 1000);
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∏–≥—Ä—ã
        function loadGame() {
            const savedGame = localStorage.getItem('kirCoinSave');
            if (savedGame) {
                const gameData = JSON.parse(savedGame);
                balance = gameData.balance || 0;
                clickPower = gameData.clickPower || 1;
                autoClickerPower = gameData.autoClickerPower || 0;
                shopItems.clickPower.level = gameData.shopItems?.clickPower?.level || 1;
                shopItems.autoClicker.level = gameData.shopItems?.autoClicker?.level || 0;
                shopItems.luck.level = gameData.shopItems?.luck?.level || 1;
                shopItems.clickerSpeed.level = gameData.shopItems?.clickerSpeed?.level || 1;
                shopItems.extraAttempts.count = gameData.shopItems?.extraAttempts?.count || 0;
                diceAttempts = gameData.diceAttempts !== undefined ? gameData.diceAttempts : 3;
                extraAttempts = gameData.extraAttempts || 0;
                playerNickname = gameData.playerNickname || '';
                totalEarned = gameData.totalEarned || 0;
                achievements = gameData.achievements || achievements;
                
                if (playerNickname) {
                    document.getElementById('nicknameModal').classList.add('hidden');
                    document.getElementById('balanceContainer').classList.remove('hidden');
                    document.getElementById('autoClickerStatus').classList.remove('hidden');
                    document.getElementById('playerRankBadge').classList.remove('hidden');
                }
                
                if (autoClickerPower > 0) {
                    startAutoClicker();
                }
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            const gameData = {
                balance,
                clickPower,
                autoClickerPower,
                shopItems,
                diceAttempts,
                extraAttempts,
                playerNickname,
                totalEarned,
                achievements
            };
            localStorage.setItem('kirCoinSave', JSON.stringify(gameData));
            
            if (playerNickname) {
                updateLeaderboard();
            }
        }

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã (–≤–≤–æ–¥ –Ω–∏–∫–∞)
        function startGame() {
            const nicknameInput = document.getElementById('nicknameInput').value.trim();
            if (nicknameInput.length < 2 || nicknameInput.length > 15) {
                alert('–ù–∏–∫–Ω–µ–π–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 2 –¥–æ 15 —Å–∏–º–≤–æ–ª–æ–≤');
                return;
            }
            
            playerNickname = nicknameInput;
            document.getElementById('nicknameModal').classList.add('hidden');
            document.getElementById('balanceContainer').classList.remove('hidden');
            document.getElementById('autoClickerStatus').classList.remove('hidden');
            document.getElementById('playerRankBadge').classList.remove('hidden');
            
            // –ü–µ—Ä–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
            if (!achievements.firstClick) {
                unlockAchievement('–ü–µ—Ä–≤—ã–π —à–∞–≥', '–í—ã –Ω–∞—á–∞–ª–∏ –∏–≥—Ä–∞—Ç—å!', 'üë£');
            }
            
            saveGame();
            updateUI();
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —Ö–æ–º—è–∫—É
        function handleHamsterClick(e) {
            playClickSound();
            addCoins(clickPower);
            sessionClicks++;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–ª–∏–∫–∞
            createClickEffect(e.clientX, e.clientY);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            clicksHistory.push(Date.now());
            updateCPS();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
            if (sessionClicks === 10 && !achievements.first100) {
                unlockAchievement('–ü–µ—Ä–≤–∞—è –¥–µ—Å—è—Ç–∫–∞', '–°–¥–µ–ª–∞–Ω–æ 10 –∫–ª–∏–∫–æ–≤!', 'üîü');
                achievements.first100 = true;
            } else if (sessionClicks === 100 && !achievements.casualPlayer) {
                unlockAchievement('–ö–ª–∏–∫–µ—Ä', '–°–¥–µ–ª–∞–Ω–æ 100 –∫–ª–∏–∫–æ–≤!', 'üíØ');
                achievements.casualPlayer = true;
            } else if (sessionClicks === 1000 && !achievements.clickMaster) {
                unlockAchievement('–ú–∞—Å—Ç–µ—Ä –∫–ª–∏–∫–∞', '–°–¥–µ–ª–∞–Ω–æ 1000 –∫–ª–∏–∫–æ–≤!', 'üëë');
                achievements.clickMaster = true;
            }
            
            saveGame();
            updateUI();
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∫–ª–∏–∫–∞
        function createClickEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'click-effect';
            effect.style.left = `${x - 15}px`;
            effect.style.top = `${y - 15}px`;
            document.body.appendChild(effect);
            
            setTimeout(() => {
                effect.remove();
            }, 600);
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/–æ—Ç–Ω–∏–º–∞–Ω–∏–µ –º–æ–Ω–µ—Ç
        function addCoins(amount) {
            balance += amount;
            totalEarned += amount;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –±–∞–ª–∞–Ω—Å—É
            if (balance >= 100 && !achievements.first100) {
                unlockAchievement('–ü–µ—Ä–≤–∞—è —Å–æ—Ç–Ω—è', '–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ 100 KC!', 'üíµ');
                achievements.first100 = true;
            }
            if (balance >= 1000 && !achievements.first1000) {
                unlockAchievement('–¢—ã—Å—è—á–Ω–∏–∫', '–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ 1000 KC!', 'üí∞');
                achievements.first1000 = true;
            }
            
            updateUI();
        }

        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function buyUpgrade(type) {
            const item = shopItems[type];
            
            if (balance >= item.price) {
                balance -= item.price;
                playBuySound();
                
                switch (type) {
                    case 'clickPower':
                        item.level++;
                        clickPower += item.increase;
                        item.price = Math.floor(item.price * 1.5);
                        break;
                    case 'autoClicker':
                        item.level++;
                        autoClickerPower += item.increase;
                        item.price = Math.floor(item.price * 1.8);
                        if (autoClickerPower === item.increase) { // –ü–µ—Ä–≤–∞—è –ø–æ–∫—É–ø–∫–∞
                            startAutoClicker();
                            unlockAchievement('–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è', '–ö—É–ø–∏–ª–∏ –∞–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä!', '‚öôÔ∏è');
                            achievements.autoClicker = true;
                        }
                        break;
                    case 'luck':
                        item.level++;
                        luckBonus += item.increase;
                        item.price = Math.floor(item.price * 1.6);
                        break;
                    case 'clickerSpeed':
                        item.level++;
                        stopAutoClicker();
                        startAutoClicker();
                        item.price = Math.floor(item.price * 2);
                        break;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –ø–æ–∫—É–ø–∫–∞–º
                let totalUpgrades = 0;
                for (const key in shopItems) {
                    if (key !== 'extraAttempts') {
                        totalUpgrades += shopItems[key].level;
                    }
                }
                
                if (totalUpgrades >= 5 && !achievements.shopaholic) {
                    unlockAchievement('–®–æ–ø–æ–≥–æ–ª–∏–∫', '–ö—É–ø–∏–ª–∏ 5 —É–ª—É—á—à–µ–Ω–∏–π!', 'üõçÔ∏è');
                    achievements.shopaholic = true;
                }
                
                saveGame();
                updateUI();
            }
        }

        // –ü–æ–∫—É–ø–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
        function buyExtraAttempts() {
            const item = shopItems.extraAttempts;
            
            if (balance >= item.price) {
                balance -= item.price;
                playBuySound();
                
                item.count++;
                extraAttempts++;
                diceAttempts++;
                item.price = Math.floor(item.price * 1.4);
                
                saveGame();
                updateUI();
            }
        }

        // –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä–∞
        function startAutoClicker() {
            if (autoClickerInterval) {
                clearInterval(autoClickerInterval);
            }
            
            const speed = 1000 / shopItems.clickerSpeed.level;
            autoClickerInterval = setInterval(() => {
                if (autoClickerPower > 0) {
                    addCoins(autoClickerPower);
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –∞–≤—Ç–æ-–∫–ª–∏–∫–∞
                    const hamster = document.getElementById('hamster');
                    const rect = hamster.getBoundingClientRect();
                    const randomX = rect.left + Math.random() * rect.width;
                    const randomY = rect.top + Math.random() * rect.height;
                    createClickEffect(randomX, randomY);
                }
            }, speed);
        }

        // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä–∞
        function stopAutoClicker() {
            if (autoClickerInterval) {
                clearInterval(autoClickerInterval);
                autoClickerInterval = null;
            }
        }

        // –ò–≥—Ä–∞ –≤ –∫—É–±–∏–∫
        function rollDice() {
            if (diceAttempts <= 0) {
                alert('–£ –≤–∞—Å –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –ø–æ–ø—ã—Ç–∫–∏!');
                document.getElementById('rollDiceBtn').disabled = true;
                return;
            }
            
            playDiceSound();
            diceAttempts--;
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–∞
            const diceResult = document.getElementById('diceResult');
            diceResult.textContent = '...';
            document.getElementById('rollDiceBtn').disabled = true;
            
            setTimeout(() => {
                const min = 20;
                const max = 40;
                const randomExtra = Math.floor(Math.random() * luckBonus);
                const result = Math.floor(Math.random() * (max - min + 1)) + min + randomExtra;
                
                diceResult.textContent = result;
                addCoins(result);
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –∫—É–±–∏–∫—É
                if (result >= 50 && !achievements.diceMaster) {
                    unlockAchievement('–ú–∞—Å—Ç–µ—Ä –∫—É–±–∏–∫–æ–≤', '–í—ã–∏–≥—Ä–∞–ª–∏ 50+ KC –∑–∞ –±—Ä–æ—Å–æ–∫!', 'üé≤');
                    achievements.diceMaster = true;
                }
                
                playWinSound();
                saveGame();
                updateUI();
                
                if (diceAttempts > 0) {
                    document.getElementById('rollDiceBtn').disabled = false;
                }
            }, 1500);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –ë–∞–ª–∞–Ω—Å –∏ –∫–ª–∏–∫–∏
            document.getElementById('balance').textContent = balance.toLocaleString();
            document.getElementById('sessionClicks').textContent = sessionClicks;
            document.getElementById('clicksPerSecond').textContent = clicksPerSecond;
            document.getElementById('autoClickerPower').textContent = autoClickerPower;
            
            // –ú–∞–≥–∞–∑–∏–Ω
            document.getElementById('clickPowerLevel').textContent = shopItems.clickPower.level;
            document.getElementById('clickPowerPrice').textContent = shopItems.clickPower.price;
            document.getElementById('autoClickerLevel').textContent = shopItems.autoClicker.level;
            document.getElementById('autoClickerPrice').textContent = shopItems.autoClicker.price;
            document.getElementById('luckLevel').textContent = shopItems.luck.level;
            document.getElementById('luckPrice').textContent = shopItems.luck.price;
            document.getElementById('clickerSpeedLevel').textContent = shopItems.clickerSpeed.level;
            document.getElementById('clickerSpeedPrice').textContent = shopItems.clickerSpeed.price;
            document.getElementById('extraAttemptsCount').textContent = shopItems.extraAttempts.count;
            document.getElementById('extraAttemptsPrice').textContent = shopItems.extraAttempts.price;
            
            // –ö—É–±–∏–∫
            document.getElementById('diceAttempts').textContent = diceAttempts;
            document.getElementById('rollDiceBtn').disabled = diceAttempts <= 0;
            
            // –ö–Ω–æ–ø–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞
            document.getElementById('buyClickPowerBtn').disabled = balance < shopItems.clickPower.price;
            document.getElementById('buyAutoClickerBtn').disabled = balance < shopItems.autoClicker.price;
            document.getElementById('buyLuckBtn').disabled = balance < shopItems.luck.price;
            document.getElementById('buyClickerSpeedBtn').disabled = balance < shopItems.clickerSpeed.price;
            document.getElementById('buyExtraAttemptsBtn').disabled = balance < shopItems.extraAttempts.price;
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            checkAchievements();
        }

        // –†–∞—Å—á–µ—Ç –∫–ª–∏–∫–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
        function updateCPS() {
            const now = Date.now();
            clicksHistory = clicksHistory.filter(timestamp => now - timestamp < 1000);
            clicksPerSecond = clicksHistory.length;
            
            document.getElementById('clicksPerSecond').textContent = clicksPerSecond;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∫–ª–∏–∫–æ–≤
            if (clicksPerSecond >= 5 && !achievements.fastClicker) {
                unlockAchievement('–°–∫–æ—Ä–æ—Å—Ç—Ä–µ–ª', '5 –∫–ª–∏–∫–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É!', '‚ö°');
                achievements.fastClicker = true;
            }
        }

        // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        function unlockAchievement(title, description, icon) {
            const container = document.getElementById('achievementsContainer');
            
            const achievement = document.createElement('div');
            achievement.className = 'achievement-badge bg-blue-800 bg-opacity-70 p-2 rounded-lg flex items-center';
            achievement.innerHTML = `
                <div class="w-10 h-10 bg-blue-700 rounded-full flex items-center justify-center mr-2">
                    <span>${icon}</span>
                </div>
                <div>
                    <p class="text-sm font-bold">${title}</p>
                    <p class="text-xs text-blue-300">${description}</p>
                </div>
            `;
            
            container.appendChild(achievement);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            achievement.style.animation = 'achievementPop 0.5s ease-out';
            setTimeout(() => {
                achievement.style.animation = '';
            }, 500);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
            if (totalEarned >= 10000 && !achievements.legend) {
                setTimeout(() => {
                    unlockAchievement('–õ–µ–≥–µ–Ω–¥–∞', '–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ 10,000 KC!', 'üåü');
                    achievements.legend = true;
                }, 1000);
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        function checkAchievements() {
            // –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–ª–∏–∫–æ–≤
            const clickProgress = Math.min(100, (sessionClicks / 10) * 100);
            document.querySelector('.progress-fill').style.width = `${clickProgress}%`;
        }

        // –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
        function playClickSound() {
            const sound = document.getElementById('clickSound');
            sound.currentTime = 0;
            sound.play();
        }

        function playBuySound() {
            const sound = document.getElementById('buySound');
            sound.currentTime = 0;
            sound.play();
        }

        function playDiceSound() {
            const sound = document.getElementById('diceSound');
            sound.currentTime = 0;
            sound.play();
        }

        function playWinSound() {
            const sound = document.getElementById('winSound');
            sound.currentTime = 0;
            sound.play();
        }

        // –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤ (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
        function loadLeaderboard() {
            const leaderboard = JSON.parse(localStorage.getItem('kirCoinLeaderboard')) || [];
            displayLeaderboard(leaderboard);
        }

        function updateLeaderboard() {
            let leaderboard = JSON.parse(localStorage.getItem('kirCoinLeaderboard')) || [];
            
            // –ù–∞—Ö–æ–¥–∏–º –∏–≥—Ä–æ–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ –ª–∏–¥–µ—Ä–æ–≤
            const playerIndex = leaderboard.findIndex(player => player.nickname === playerNickname);
            
            // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ —É–∂–µ –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ, –æ–±–Ω–æ–≤–ª—è–µ–º –µ–≥–æ —Å—á–µ—Ç
            if (playerIndex !== -1) {
                leaderboard[playerIndex].balance = balance;
                leaderboard[playerIndex].totalEarned = totalEarned;
            } else {
                // –ò–Ω–∞—á–µ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞
                leaderboard.push({
                    nickname: playerNickname,
                    balance: balance,
                    totalEarned: totalEarned
                });
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –æ–±—â–µ–º—É –∑–∞—Ä–∞–±–æ—Ç–∫—É
            leaderboard.sort((a, b) => b.totalEarned - a.totalEarned);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç–æ–ø
            localStorage.setItem('kirCoinLeaderboard', JSON.stringify(leaderboard));
            displayLeaderboard(leaderboard);
        }

        function displayLeaderboard(leaderboard) {
            const container = document.getElementById('leaderboard');
            container.innerHTML = '';
            
            if (leaderboard.length === 0) {
                container.innerHTML = '<div class="text-center py-4"><p class="text-blue-300">–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –∏–≥—Ä–∞–ª</p></div>';
                return;
            }
            
            leaderboard.slice(0, 10).forEach((player, index) => {
                const playerElement = document.createElement('div');
                playerElement.className = 'flex justify-between items-center py-2 px-3 border-b border-blue-800';
                
                // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ç–æ–ø-3 –∏–≥—Ä–æ–∫–æ–≤
                let positionClass = 'text-gray-300';
                let positionText = `${index + 1}`;
                
                if (index === 0) {
                    positionClass = 'text-yellow-400 font-bold';
                    positionText = 'ü•á';
                } else if (index === 1) {
                    positionClass = 'text-gray-200 font-bold';
                    positionText = 'ü•à';
                } else if (index === 2) {
                    positionClass = 'text-yellow-600 font-bold';
                    positionText = 'ü•â';
                }
                
                // –í—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
                if (player.nickname === playerNickname) {
                    playerElement.className += ' bg-blue-800 bg-opacity-50';
                    document.getElementById('playerRank').textContent = index + 1;
                }
                
                playerElement.innerHTML = `
                    <div class="flex items-center">
                        <span class="w-6 text-center mr-2 ${positionClass}">${positionText}</span>
                        <span class="${player.nickname === playerNickname ? 'font-bold text-yellow-300' : ''}">${player.nickname}</span>
                    </div>
                    <span class="text-yellow-400">${player.totalEarned.toLocaleString()} KC</span>
                `;
                
                container.appendChild(playerElement);
            });
            
            // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–µ –≤ —Ç–æ–ø-10, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ –ø–æ–∑–∏—Ü–∏—é –æ—Ç–¥–µ–ª—å–Ω–æ
            const playerPosition = leaderboard.findIndex(player => player.nickname === playerNickname);
            if (playerPosition >= 10) {
                const player = leaderboard[playerPosition];
                const playerElement = document.createElement('div');
                playerElement.className = 'flex justify-between items-center py-2 px-3 mt-4 border-t border-blue-700 text-blue-300';
                playerElement.innerHTML = `
                    <div class="flex items-center">
                        <span class="w-6 text-center mr-2">${playerPosition + 1}</span>
                        <span class="font-bold text-yellow-300">${player.nickname}</span>
                    </div>
                    <span class="text-yellow-400">${player.totalEarned.toLocaleString()} KC</span>
                `;
                container.appendChild(playerElement);
            }
        }
    </script>
</body>
</html>
